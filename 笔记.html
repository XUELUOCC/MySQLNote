<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    

    <script>
        /*
        注意：
        1.MySQL是不见;分号，不执行SQL语句，分号;才是结束
        2.数据库中的字符串都是单引号，双引号不能用，不过MySQL中可使用双引号
        3.数据库中只要有null参与的运算结果一定是null（但分组函数自动忽略null，不影响），可通过ifnull处理null的数据
        4.null不是一个值，null是什么也没有
        5.SQL的一些语句的执行顺序：
            select
                ...
            from
                ...
            where
                ...
            group by
                ...
            having
                ...
            order by
                ...
            limit
                0,5
            执行顺序：
            --1.from  查找表
            --2.where 筛选条件
            --3.group by 对数据进行分组
            --4.having 对分组的数据进行过滤
            --5.select  查找整体数据中的一部分字段数据
            --6.order by 对数据进行排序并输出
            --7.limit 取出下标从0开始，长度为5的数据

            1.数据库概括
                --简称：DB
                --按照一定格式存储数据的一些文件的组合

            2.数据库管理系统
                --简称DBMS
                --数据库管理系统是专门用来管理数据库中的数据，数据库管理系统可以对数据库中的数据进行增删改查
                --常见的数据库管理系统：MySQL,Oracle,MS SqlServer,DB2,sybase等

            3.SQL语句
                --程序化查询语句
                --可通过编写SQL语句，然后DBMS执行SQL语句，实现增删改查

            4.windows下的以命令行执行MySQL的启动和停止
                --通过管理员身份启动cmd
                    --启动：net start 服务器名称（MySQL）
                    --停止：net stop 服务器名称（MySQL）
                --查看服务：  此电脑>管理（属性）>管理和应用程序（服务）

            5.本地登录MySQL
                --以管理员身份运行cmd （前提是MySQL服务已启动）
                    --执行 $mysql -uroot -p123456    (输入数据库的用户名和密码)
                    --登录进入后界面：
                        mysql>...
                    --退出：
                        mysql>exit
                --隐藏密码格式：
                    --$mysql -uroot -p

            6.MySQL的常用命令：
                命令不区分大小写
                --退出：exit
                --查看MySQL有哪些数据库：show databases;(以分号结尾)
                --选择使用某个数据库：use test;(选择使用test的数据库，以分号结尾)
                --创建数据库：create database test1;(数据库名称，以分号结尾)
                --删除数据库：drop database test;(数据库名称)
                --查看数据库中存在的表：show tables; (前提是已经使用了某个数据库，即执行use test类似的命令)
                --查看mysql数据库的版本号：select version();
                --查看当前使用的数据库：select database();
                --查看数据库中的表结构： desc user_table;(表名)

            7.数据库中的表：
                --定义：数据库中的最基本的单元
                --数据库中是以表格的形式表示数据库，因为表比较直观
                --组成：
                    行（row）:称为数据/记录
                    列（column）:称为字段
                        --字段属性：字段名，数据类型，约束等属性
                            --约束：约束有很多，其中一个叫做唯一性约束，这种约束添加之后，该字段的数据不能重复

            8.SQL语句的分类：
                --DQL:
                    数据库查询语言（带有select的查询语句）
                --DML：
                    数据库操作语言（操作数据库中的表中的数据）
                    --insert 增
                    --delete 删
                    --update 改
                --DDL：
                    数据定义语言
                    凡是带有create ,drop,alert的都是DDL
                    DDL主要是操作表的结构，不是表中的数据
                    create:新建，类似于增
                    drop:删除
                    alert:修改
                --TCL:
                    事务控制语言
                    包括：
                        事务提交：commit;
                        事务回滚：rollback;
                --DCL:
                    数据控制语言
                    例如：授权grant,撤销权限revoke

            9.导入sql文件到数据库中
                命令：$source D://...(导入文件的路径，路径中不能存在中文);

            10.查看表中的数据
                执行SQL中的DQL,查询语句
                命令：$select * from test(表名);----查询某表的所有数据
                命令：$select 
            
            11.只查看表的结构，不查看表的数据
                命令：$desc test(表名);

            12.DQL查询语句
                --查询一个字段
                    select 字段名 from 表名
                    select name from user_table
                --查询多个字段
                    select 字段名,字段名 from 表名
                    select name,gender from user_table
                --查询所有字段
                    select * from 表名  
                        缺点：效率低，可读性低，不建议实际开发中使用
                    select 字段名,字段名... from 表名
                --使用as对查询的语句起别名（给查询的列起另一个名称，对原表不影响）
                    select 查询字段 as 别名 from 表名;
                    select 查询字段 别名 from 表名  （可省略as）
                    select name as newName,chinese as newChinese from user-table;  (对多个字段起别名)
                    别名出现空格的情况：
                    select name as 'queryName' from user_table; (加单引号''可解决别名中间出现空格的情况)
                    select name as 'query Name' from user_table;
                --字段可以使用数学表达式(加减乘除)
                    select math*2 from user_table;  (查询的是math字段乘以12的显示数据，查询出来的数据名称可通过别名修改)

                    select math*2 mathName from user_table; (将查询到的数据流通过别名进行重新定义，否则查询出来的名称就是math*2)
                    +-------------+
                    | mathName |
                    +-------------+
                    |         210 |
                    |         200 |
                    |          60 |
                    |          60 |
                    +-------------+
            13.DQL条件查询（使用where语句，当...）
                --条件：
                    () 括号——支持
                        --不确定优先级，就添加()
                    大于>
                    小于<
                    不等于 !=,,,<>
                    等于 =
                    =null 不支持，只能使用is null
                        --因为数据库中的null代表什么都没有，所以不能使用等号=来衡量
                    两值之间的范围 —— 条件 between ... and ... (等同于——条件 >= and <= )
                        --必须是左小右大，否则就会出错
                        --select chinese from user_table where chinese between 30 and 100;
                    或者 or
                        --优先级比and低
                    并且 and 
                        --优先级比or高
                    is null 是空 ， is not null 不为空
                        --不能使用 !=null
                    包含 in (相当于多个or )
                        --并不是一个区间
                        --select * from user_table where chinese in (90,100,...) ————查找chinese=90或者是chinese=100的数据
                        --select * from user_table where chinese =90 or chinese chinese=100 ————查找chinese=90或者是chinese=100的数据
                    not 可以取非得意思，多用于 in或者is中
                        --not in （90,100） ————除了90或者是100之外的数据
                        --is not null  ————不是为null的数据
                    like 称之为模糊查询，支持%或是下划线匹配
                        --select name from user_table where name like '%o%'; ————查找表中的name字段中含有‘o’的数据
                        --select name from user_table where name like '%T'; ————查找表中的name字段以‘T’结尾的数据
                        --select name from user_table where name like 'T%'; ————查找表中的name字段以‘T’开头的数据
                        --select name from user_table where name like '_T%'; ————查找表中的name字段第二个字符是‘T’的数据
                        --select name from user_table where name like '__T%'; ————查找表中的name字段第三个字符是‘T’的数据

                    \ 转义字符
                        --可用于%和_，转义成普通字符
                        --%\_%   匹配到字段中含有‘_’的数据
                    % 匹配任意字符
                        --%o%  匹配字符中含有o的数据
                        --%T   匹配字符中以T结尾的数据
                        --T%   匹配字符中以T开头的数据
                    _ 下划线 一个下划线只匹配一个字符
                        --_   匹配到任意一个字符
                        --_T  匹配到第二个字符是‘T’的数据
                        --__T 匹配到第三个字符是‘T’的数据
                --查询符合条件的数据
                    select name,gender from user_table where englist=120; (查询表中englist=120时的name和gender字段)
            
            14.DQL设置查询排序
                --对查询的数据的单个字段进行排序
                    --默认是升序
                    --order by 
                        --升序 
                        --select name,gender,chinese,math from user_table order by chinese 
                            --对查询出来的数据通过chinese的数值进行升序（从小到大排序）
                    --order by 字段名 desc  
                        --降序
                        --select name,gender,chinese,math from user_table order by chinese desc
                    --order by 字段名 asc 
                        --指定升序
                        --select name,gender,chinese,math from user_table order by chinese asc;
                --对查询的数据多个字段进行排序
                    --现指定一个排序，如果前面的排序不能排序出来（例如第一个字段相等）,此时需要第二个字段指定排序规则，进行排序
                    --select 
                        name,gender,chinese,math 
                    from 
                        user_table 
                    order by 
                        chinese asc,math desc;
                        --查找的数据按照chinese的升序排列，如果查找的数据chinese一样，就按照math的降序排列 (相当于对相等的数据做了一个排序判断)
                --根据字段的位置进行排序
                    --不建议开发中这样写，因为不健壮，因为列的顺序很容易发生改变
                    --select name,chinese from order by 2;  ————按照查询结果的第二列进行排序（即对第二列的数据指定排序规则）
            15.DQL单行数据处理函数
                --被称为，单行处理函数
                --特点：一个输入一个输出 （一次只对某一条数据进行处理，此次数据处理后才会处理下一条）
                --自动忽略null
                --与单行处理函数对应的是多行处理函数，多个输入对应一个输出（例如，得到多条数据的和，平均值等）
                --单行处理函数：
                    --字符串的起始下标是从1开始
                    --concat
                        --字符串拼接
                        --select concat(substr(name,1,1),'a') from user_table (查询到user_table中的name，截取字符串并拼接,最后输出)
                    --lower 
                        --转小写
                        select lower(name) from user_table;
                    --upper
                        --转大写
                            select upper(name) from user_table;
                    --substr
                        --取子串，类似于截取字符串
                        --substr(被截取的字符串，起始下标，截取长度)
                    --length
                        --长度
                    --trim
                        --去空格
                    --str_to_date
                        --将字符串转化成日期
                    --date_format
                        --格式化日期
                    --format
                        --设置千分位
                    --round
                        --round(字段名变量，保留的位数)
                        --四舍五入
                        select round(123.45,1) from user_table  (123.45保留一位小数)
                        select round(123.45,-1) from user_table  (123.45保留十位)
                        select round(123.45,-2) from user_table  (123.45保留百位)
                    --rand()
                        --生成随机数
                    --ifnull
                        --可以降null转化成一个具体值
                        --ifnull(数据，为空时当成的具体值)
                        --处理为null的数据
                        --select name,ifnull(chinese,0)*12 from user_table （输出chinese*12的数据，当chinese=null时，其值等同于0）
                    --case...when..then..when..then..else..end
                        --不改变表格数据
                        --当..此时..当..此时..否则..结束
                        select 
                            name,
                            chinese,
                            math as oldMath,
                            (case math when 90 then chinese*1.5 when 100 then chinese*2 else chinese end)
                        as
                            result
                        from
                            user_table
                        (查找name,chinese,math,并且当math=90时输出chinese*1.5 当math=100时，输出chinese*2)
            
            16.DQL多行处理函数（分组函数）
                注意：
                    分组函数使用的时候必须进行分组，才能使用。如果没有对数据进行分组，则整张表默认为一组
                    分组函数不能使用在where语句中，因为在执行顺序上，执行到where时，并没有进行分组
                --多个输入对应一个输出（例如，得到多条数据的和，平均值等）
                --自动忽略null，处理的都是不为null的数据
                --多行处理函数：
                    --count
                        计数（计算有多少个数据）
                        count(字段名)---统计该字段下不为null的元素的总数
                        count(*)--统计的是该表的总行数，因为每一行数据不可能全部都为null
                    --sum
                        求和
                    --avg
                        平均值
                    --max
                        最大值
                    --min
                        最小值
            17.DQL的分组函数的分组查询
                --先进行分组，然后对每一组的数据进行操作
                --分组查询：
                    select 进行分组的字段，分组函数 from 表名 group by 进行分组的字段
                        --只能这样写，如果再添加一个另一个字段，在MySQL中可以执行，但毫无意义，但在Oracal中将会报错
                            --例如：select name,job,sum(sal)...  通过job职位进行分组，一个职位对应的是多个name，所以name和分组的数据并不对应
                    select job,sum(sal) from user_table group by job; (根据job进行分组，对每个job相同的数据进行工资sal求和)
                --多字段分组：
                    --例如：查找每个部门dept，不同的工作职位job的最高薪资sal的
                        select 
                            dept,job,max(sal) 
                        from 
                            user_table 
                        group by 
                            dept,job
                --对分组之后的数据进行过滤
                    --例如：查找每个部门dept的最高薪资sal，要求显示大于3000的最高薪资
                        方法一：先分组再过滤出大于3000
                            --使用having
                            --having必须和group by 联合使用，不能单独使用
                            缺点：效率低，having的效率低
                            select 
                                dept,max(sal) 
                            from 
                                user_table 
                            group by 
                                dept 
                            having 
                                max(sal)>3000
                        方法二：先找出大于3000的数据，然后再分组
                            select 
                                dept,max(sal) 
                            from 
                                user_table 
                            where 
                                sal>3000 
                            group by 
                                dept
                    --优化策略：
                        having和where,优先选择where，如果where处理不了的再选择having
            18.去除查询结果的重复记录
                --使用distinct,只能出现所有查询字段的最前方
                    select distinct name from user_table;
            19.连接查询（多表查询）
                --多张表联合起来查询数据，例如从表1中查询某字段，再从表2中查询某字段，这种跨表查询，被称之为连接查询
                --分类：
                    可根据语法年代分类：
                        --SQL92:1992年出现的语法
                        --SQL99:1999年出现的语法（一般使用SQL99的语法）
                    可根据表的连接方式分类：
                        --内连接：
                            --将两表中完全能匹配的数据全部显示查询出来
                            --内连接中不存在主次关系
                            等值连接
                                --条件是一个等值关系，相等关系
                                查询每个员工所在的部门名，user_table中存在员工名和部门编号，dept中存在部门编号和部门名称
                               --select 
                                    u.name,d.deptName 
                                from 
                                    user_table u
                                inner join（内连接吗，inner代表内连接）
                                    dept d 
                                on （筛选条件）
                                    u.deptno=d.deptno;
                            非等值连接
                                --条件是一个非等值关系，不是一个相等的关系
                                查询每个员工的薪资等级，emp表中存在具体薪资sal和员工名称name，gradeSal表中存在薪资的最高薪资hisal，最低薪资losal和薪资等级grade
                                --select 
                                    e.name,s.grade
                                from 
                                    emp e
                                join
                                    gradeSal s
                                on
                                    e.sal between s.losal and s.hisal;

                            自连接
                                --条件是在同一张表中的数据
                                --技巧：一张表需要看成两张表
                                查询员工的上级领导，显示上级领导名。user_table表中存在员工名，员工编号，员工对应的领导编号，其中领导也是员工，此时领导编号=员工编号
                                nameNo(员工编号) name(员工名) mgr(领导编号)
                                    7902            员工1         7930
                                    7930            员工2         7940
                                --select 
                                    a.name as '员工名',b.name as '领导名',
                                from 
                                    user_table as a
                                join
                                    user_table as b
                                on
                                    a.mgr=b.nameNo

                        --外连接
                            --除了两表匹配的数据显示出来，同时需要将第二张表的数据也显示出来，此时就需要使用外连接
                            --外连接中两张表中存在主次关系
                                --即，主表全部显示，次表只显示匹配的部分数据
                            --外连接的查询结果条数一定是>=内连接的查询结果条数
                            左外连接（左连接）
                            --将left join左边的表当作主表，右边的表是次表
                                查询每个员工所在的部门名，user_table中存在员工名和部门编号，dept中存在部门编号和部门名称
                                    --select 
                                        u.name,d.deptName 
                                    from 
                                        user_table u left outer(可省略) join dept d （left代表左外连接，左边的表是主表）
                                    on （连接查询的筛选条件）
                                        u.deptno=d.deptno;
                            右外连接（右连接）
                            --将right join右边的表当作主表，全部显示，左边的表是次表，只是捎带查询
                                查询每个员工所在的部门名，user_table中存在员工名和部门编号，dept中存在部门编号和部门名称
                               --select 
                                    u.name,d.deptName 
                                from 
                                    user_table u right outer(可省略) join dept d （right代表右外连接，右边的表是主表）
                                on （连接查询的筛选条件）
                                    u.deptno=d.deptno;
                        --全连接
                --笛卡尔积现象：
                    当两张表进行连接查询，没有任何条件限制的时候，最终查询结果条数，会是两张表的乘积，这种现象被称为：笛卡尔积现象
                    select name,job from user_table,dept; (user_table中存在m条数据，dept表中存在n条数据，最终结果条数为m*n)
                --避免笛卡尔积现象：
                    --连接时添加条件（匹配的次数并没有减少，仍然是m*n,只不过是添加了筛选）
                        --select name,deptName from user_table,dept where user_table.deptno=dept.deptno;
                            (查询每个员工所在的部门名，user_table中存在员工名和部门编号，dept中存在部门编号和部门名称)
                --优化效率：
                    --表的连接次数过多，效率越低
                    --1.给表起别名，以此说明在哪个表中查询
                        SQL92语法：
                        SQL92的缺点：结构不清晰，表的连接条件，和后期进一步筛选的条件都会放在where后面，使用and连接
                            --select 
                                u.name,d.deptName 
                            from 
                                user_table u,dept d 
                            where 
                                u.deptno=d.deptno;
                        SQL99语法：
                        SQL99的优点：表连接的条件是独立的，连接之后，如果还需要进一步筛选，再往后添加where
                            --select 
                                u.name,d.deptName 
                            from 
                                user_table u
                            join（连接）
                                dept d 
                            on （筛选条件）
                                u.deptno=d.deptno;
                    --2.减少表的连接次数

            20.两张以上表的连接查询（三张，四张表）
                ---内连接和外连接都可混合使用
                --select
                    ...
                from
                    a
                join 
                    b
                on
                    a和b的连接条件
                join 
                    c
                on
                    a和c的连接条件
                （a和b连接完成后，再连接c表。或者是a和b连接完成，a再和c连接）

            21.子查询
                --select语句中嵌套select语句，被嵌套的select语句被称为子查询
                --select
                    ..(select语句可出现)
                from
                    ..(select语句可出现)
                where
                    ..(select语句可出现)
                --where语句后的子查询
                    案例：
                        查询每个员工的最低工资
                        select 
                            name,sal 
                        from 
                            user_table 
                        where 
                            sal>(select min(sal) from user_table)
                --from语句后的子查询
                    --from后的子查询，可将子查询的查询结果当成一张临时表
                    案例：
                        查询每个岗位的平均工资的工资等级
                        --1.将查询出平均工资的查询结果当成一张临时表t
                        --2.再在salgrade表s 中查找工资等级，并和临时表连接查询
                        select 
                            t.*,s.grade
                        from
                            t
                        join
                            salgrade s
                        on
                            t.avg(sal) between losal and hisal;
                        ==>
                        select 
                            t.*,s.grade
                        from
                            (select job,avg(sal) avgsal(别名) from emp group by job) t
                        join
                            salgrade s
                        on
                            t.avgsal between losal and hisal;

            22.union合并查询结果集
                --将两个查询结果进行合并
                --优点：union的效率高一些，特别对于表的连接查询来说，因为表的连接次数满足笛卡尔积，次数会相乘成倍，
                        但union可以有效的降低连接的匹配次数，同时可以在减少连接的次数的情况下，完成两个结果集的拼接
                --注意：
                    在使用union的同时，要求查询的表的列数（字段数）需要相同
                --案例：查询工作岗位是‘manager’,‘salesman’的员工
                    select name from emp where job='manager'
                    union
                    select name from emp where job='salesman'
                    ===等同于
                    select name from emp where job in('manager','salesman')
                --案例：
                    a连接b,连接c 
                    a 10条记录
                    b 10条记录
                    c 10条记录
                    连接次数：10*10*10=1000次

                    使用union
                    a连接b  连接次数10*10=100
                    a连接c  连接次数10*10=100
                    使用union后，连接次数=100+100=200次

            23.limit
                --limit是将查询结果集的一部分取出来，通常使用在分页查询中
                --分页的作用：提交用户的体验
                --用法：
                    limit startIndex,length
                    默认下标为0
                    例如： limit 0,5  取出下标从0开始，长度为5的数据
                    例如：limit 5  同样是取出长度为5的数据，从下标为0开始
                --注意：
                    limit在order by之后执行
                --案例：按照薪资降序，取出前5名的员工
                    select
                        name,sal
                    from
                        emp
                    order by
                        sal desc
                    limit
                        5;  取出前五


        
        */
    </script>
</body>
</html>